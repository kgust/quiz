(function(b){b.fn.microModal=function(d){var e=b.extend(true,{},b.fn.microModal.defaults,d);return this.each(function(){var h=b(this);var g="#"+c("target-",h);var f=b('<div style="width:100%;height:100%;position:fixed;margin:0;padding:0;z-index:99999;top:0px;left:0px;right:0px;bottom:0px" />');f.css("background-color",e.overlay.color);f.css("opacity",e.overlay.opacity);b(g).css("position","absolute").css("z-index",999999);var i=null;if(e.overlay.show){i=new a(b(g).clone(true),f.clone(true),e.autoPositioning)}else{i=new a(b(g).clone(true),null,e.autoPositioning)}b(g).remove();f.remove();b.fn.microModal.dialogs[g]=i;h.click(function(j){b.fn.microModal.dialogs[g].open();return false})})};function c(d,g){var f=g.attr("class").split(" ");for(var e=0;e<f.length;e++){if(f[e].indexOf(d)>-1){var h=f[e].split("-");return h[h.length-1]}}return null}var a=function(h,e,f){this.isVisible=false;var i=h;var g=e;var k=f;var j="#"+i.attr("id");this.close=function(){b(j).remove();b(j+"-overlay").remove();this.isVisible=false};this.open=function(){if(g!=null){var m=g.clone(true);m.attr("id",i.attr("id")+"-overlay");b("body").append(m)}var l=i.clone(true);b("body").append(l);if(k){d(l);b(window).resize(function(){d(l)});b(window).scroll(function(){d(l)})}this.isVisible=true};var d=function(l){l.css("top",(b(window).height()-l.outerHeight())/2+b(window).scrollTop()+"px");l.css("left",(b(window).width()-l.outerWidth())/2+b(window).scrollLeft()+"px")}};b.fn.microModal.defaults={autoPositioning:true,overlay:{show:true,color:"#fff",opacity:0.8}};b.fn.microModal.dialogs=new Object()})(jQuery);